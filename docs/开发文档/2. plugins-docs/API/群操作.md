---
sidebar_position: 8
---


## 群信息

群信息相关 API



### 获取群信息

终结点：`get_group_info`

**参数**

| 字段名     | 数据类型 | 默认值  | 说明                                                 |
| ---------- | -------- | ------- | ---------------------------------------------------- |
| `group_id` | int64    | -       | 群号                                                 |
| `no_cache` | boolean  | `false` | 是否不使用缓存（使用缓存可能更新不及时, 但响应更快） |

**响应数据**

::: tip 提示
如果机器人尚未加入群, `group_create_time`, `group_level`, `max_member_count` 和 `member_count` 将会为0
:::

| 字段名              | 数据类型 | 说明                 |
| ------------------- | -------- | -------------------- |
| `group_id`          | int64    | 群号                 |
| `group_name`        | string   | 群名称               |
| `group_memo`        | string   | 群备注               |
| `group_create_time` | uint32   | 群创建时间           |
| `group_level`       | uint32   | 群等级               |
| `member_count`      | int32    | 成员数               |
| `max_member_count`  | int32    | 最大成员数（群容量） |

::: tip 提示
这里提供了一个API用于获取群图片, `group_id` 为群号
https://p.qlogo.cn/gh/{group_id}/{group_id}/100
:::

::: warning 注意
在 `go-cqhttp-v0.9.40`之前的版本中，该API不能获取陌生群消息
:::



### 获取群列表

终结点：`get_group_list`

**参数**

| 字段名     | 数据类型 | 默认值  | 说明                                                 |
| ---------- | -------- | ------- | ---------------------------------------------------- |
| `no_cache` | boolean  | `false` | 是否不使用缓存（使用缓存可能更新不及时, 但响应更快） |

**响应数据**

响应内容为 json 数组, 每个元素和上面的 `get_group_info` 接口相同。



### 获取群成员信息

终结点：`get_group_member_info`

**参数**

| 字段名     | 数据类型 | 默认值  | 说明                                                 |
| ---------- | -------- | ------- | ---------------------------------------------------- |
| `group_id` | int64    | -       | 群号                                                 |
| `user_id`  | int64    | -       | QQ 号                                                |
| `no_cache` | boolean  | `false` | 是否不使用缓存（使用缓存可能更新不及时, 但响应更快） |

**响应数据**

| 字段名              | 数据类型 | 说明                                  |
| ------------------- | -------- | ------------------------------------- |
| `group_id`          | int64    | 群号                                  |
| `user_id`           | int64    | QQ 号                                 |
| `nickname`          | string   | 昵称                                  |
| `card`              | string   | 群名片／备注                          |
| `sex`               | string   | 性别, `male` 或 `female` 或 `unknown` |
| `age`               | int32    | 年龄                                  |
| `area`              | string   | 地区                                  |
| `join_time`         | int32    | 加群时间戳                            |
| `last_sent_time`    | int32    | 最后发言时间戳                        |
| `level`             | string   | 成员等级                              |
| `role`              | string   | 角色, `owner` 或 `admin` 或 `member`  |
| `unfriendly`        | boolean  | 是否不良记录成员                      |
| `title`             | string   | 专属头衔                              |
| `title_expire_time` | int64    | 专属头衔过期时间戳                    |
| `card_changeable`   | boolean  | 是否允许修改群名片                    |
| `shut_up_timestamp` | int64    | 禁言到期时间                          |



### 获取群成员列表

终结点：`get_group_member_list`

**参数**

| 字段名     | 数据类型 | 默认值  | 说明                                                 |
| ---------- | -------- | ------- | ---------------------------------------------------- |
| `group_id` | int64    | -       | 群号                                                 |
| `no_cache` | boolean  | `false` | 是否不使用缓存（使用缓存可能更新不及时, 但响应更快） |

**响应数据**

响应内容为 json 数组, 每个元素的内容和上面的 `get_group_member_info` 接口相同, 但对于同一个群组的同一个成员, 获取列表时和获取单独的成员信息时, 某些字段可能有所不同, 例如 `area`、`title` 等字段在获取列表时无法获得, 具体应以单独的成员信息为准。



### 获取群荣誉信息

终结点：`get_group_honor_info`

**参数**

| 字段名     | 数据类型 | 默认值 | 说明                                                         |
| ---------- | -------- | ------ | ------------------------------------------------------------ |
| `group_id` | int64    | -      | 群号                                                         |
| `type`     | string   | -      | 要获取的群荣誉类型, 可传入 `talkative` `performer` `legend` `strong_newbie` `emotion` 以分别获取单个类型的群荣誉数据, 或传入 `all` 获取所有数据 |

**响应数据**

| 字段名               | 数据类型 | 说明                                                       |
| -------------------- | -------- | ---------------------------------------------------------- |
| `group_id`           | int64    | 群号                                                       |
| `current_talkative`  | object   | 当前龙王, 仅 `type` 为 `talkative` 或 `all` 时有数据       |
| `talkative_list`     | array    | 历史龙王, 仅 `type` 为 `talkative` 或 `all` 时有数据       |
| `performer_list`     | array    | 群聊之火, 仅 `type` 为 `performer` 或 `all` 时有数据       |
| `legend_list`        | array    | 群聊炽焰, 仅 `type` 为 `legend` 或 `all` 时有数据          |
| `strong_newbie_list` | array    | 冒尖小春笋, 仅 `type` 为 `strong_newbie` 或 `all` 时有数据 |
| `emotion_list`       | array    | 快乐之源, 仅 `type` 为 `emotion` 或 `all` 时有数据         |

其中 `current_talkative` 字段的内容如下：

| 字段名      | 数据类型 | 说明     |
| ----------- | -------- | -------- |
| `user_id`   | int64    | QQ 号    |
| `nickname`  | string   | 昵称     |
| `avatar`    | string   | 头像 URL |
| `day_count` | int32    | 持续天数 |

其它各 `*_list` 的每个元素是一个 json 对象, 内容如下：

| 字段名        | 数据类型 | 说明     |
| ------------- | -------- | -------- |
| `user_id`     | int64    | QQ 号    |
| `nickname`    | string   | 昵称     |
| `avatar`      | string   | 头像 URL |
| `description` | string   | 荣誉描述 |



### 获取群系统消息

终结点: `get_group_system_msg`

**响应数据**

| 字段               | 类型             | 说明         |
| ------------------ | ---------------- | ------------ |
| `invited_requests` | InvitedRequest[] | 邀请消息列表 |
| `join_requests`    | JoinRequest[]    | 进群消息列表 |

::: warning 注意
如果列表不存在任何消息, 将返回 `null`
:::

**InvitedRequest**

| 字段           | 类型   | 说明              |
| -------------- | ------ | ----------------- |
| `request_id`   | int64  | 请求ID            |
| `invitor_uin`  | int64  | 邀请者            |
| `invitor_nick` | string | 邀请者昵称        |
| `group_id`     | int64  | 群号              |
| `group_name`   | string | 群名              |
| `checked`      | bool   | 是否已被处理      |
| `actor`        | int64  | 处理者, 未处理为0 |

**JoinRequest**

| 字段             | 类型   | 说明              |
| ---------------- | ------ | ----------------- |
| `request_id`     | int64  | 请求ID            |
| `requester_uin`  | int64  | 请求者ID          |
| `requester_nick` | string | 请求者昵称        |
| `message`        | string | 验证消息          |
| `group_id`       | int64  | 群号              |
| `group_name`     | string | 群名              |
| `checked`        | bool   | 是否已被处理      |
| `actor`          | int64  | 处理者, 未处理为0 |

::: warning 注意
在 `go-cqhttp-v0.9.40` 之前的版本中，无法获取被过滤的群系统消息
:::



### 获取精华消息列表

终结点: `get_essence_msg_list`

**参数**

| 字段       | 类型  | 说明 |
| ---------- | ----- | ---- |
| `group_id` | int64 | 群号 |

**响应数据**

响应内容为 JSON 数组，每个元素如下：

| 字段名          | 数据类型 | 说明         |
| --------------- | -------- | ------------ |
| `sender_id`     | int64    | 发送者QQ 号  |
| `sender_nick`   | string   | 发送者昵称   |
| `sender_time`   | int64    | 消息发送时间 |
| `operator_id`   | int64    | 操作者QQ 号  |
| `operator_nick` | string   | 操作者昵称   |
| `operator_time` | int64    | 精华设置时间 |
| `message_id`    | int32    | 消息ID       |



### 获取群 @全体成员 剩余次数

终结点: `get_group_at_all_remain`

**参数**

| 字段       | 类型  | 说明 |
| ---------- | ----- | ---- |
| `group_id` | int64 | 群号 |

**响应数据**

| 字段                            | 类型  | 说明                                |
| ------------------------------- | ----- | ----------------------------------- |
| `can_at_all`                    | bool  | 是否可以 @全体成员                  |
| `remain_at_all_count_for_group` | int16 | 群内所有管理当天剩余 @全体成员 次数 |
| `remain_at_all_count_for_uin`   | int16 | Bot 当天剩余 @全体成员 次数         |





## 群设置

群设置相关 API



### 设置群名

终结点：`set_group_name`

**参数**

| 字段名       | 数据类型 | 说明   |
| ------------ | -------- | ------ |
| `group_id`   | int64    | 群号   |
| `group_name` | string   | 新群名 |

::: tip 提示
该 API 无响应数据
:::



### 设置群头像

终结点: `set_group_portrait`

**参数**

| 字段       | 类型   | 说明                     |
| ---------- | ------ | ------------------------ |
| `group_id` | int64  | 群号                     |
| `file`     | string | 图片文件名               |
| `cache`    | int    | 表示是否使用已缓存的文件 |

[1] `file` **参数**支持以下几种格式：

- 绝对路径, 例如 `file:///C:\\Users\Richard\Pictures\1.png`, 格式使用 [`file` URI](https://tools.ietf.org/html/rfc8089)
- 网络 URL, 例如 `http://i1.piimg.com/567571/fdd6e7b6d93f1ef0.jpg`
- Base64 编码, 例如 `base64://iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAAKElEQVQ4EWPk5+RmIBcwkasRpG9UM4mhNxpgowFGMARGEwnBIEJVAAAdBgBNAZf+QAAAAABJRU5ErkJggg==`

[2] `cache`**参数**: 通过网络 URL 发送时有效, `1`表示使用缓存, `0`关闭关闭缓存, 默认 为`1`

[3] 目前这个API在登录一段时间后因cookie失效而失效, 请考虑后使用



### 设置群管理员

终结点：`set_group_admin`

**参数**

| 字段名     | 数据类型 | 默认值 | 说明                      |
| ---------- | -------- | ------ | ------------------------- |
| `group_id` | int64    | -      | 群号                      |
| `user_id`  | int64    | -      | 要设置管理员的 QQ 号      |
| `enable`   | boolean  | `true` | true 为设置, false 为取消 |

::: tip 提示
该 API 无响应数据
:::



### 设置群名片 ( 群备注 )

终结点：`set_group_card`

**参数**

| 字段名     | 数据类型 | 默认值 | 说明                                     |
| ---------- | -------- | ------ | ---------------------------------------- |
| `group_id` | int64    | -      | 群号                                     |
| `user_id`  | int64    | -      | 要设置的 QQ 号                           |
| `card`     | string   | 空     | 群名片内容, 不填或空字符串表示删除群名片 |

::: tip 提示
该 API 无响应数据
:::



### 设置群组专属头衔

终结点：`set_group_special_title`

**参数**

| 字段名          | 数据类型 | 默认值 | 说明                                                         |
| --------------- | -------- | ------ | ------------------------------------------------------------ |
| `group_id`      | int64    | -      | 群号                                                         |
| `user_id`       | int64    | -      | 要设置的 QQ 号                                               |
| `special_title` | string   | 空     | 专属头衔, 不填或空字符串表示删除专属头衔                     |
| `duration`      | uint32   | `-1`   | 专属头衔有效期, 单位秒, -1 表示永久, 不过此项似乎没有效果, 可能是只有某些特殊的时间长度有效, 有待测试 |

::: tip 提示
该 API 无响应数据
:::



## 群操作

群操作相关 API



### 群单人禁言

终结点：`set_group_ban`

**参数**

| 字段名     | 数据类型 | 默认值    | 说明                             |
| ---------- | -------- | --------- | -------------------------------- |
| `group_id` | int64    | -         | 群号                             |
| `user_id`  | int64    | -         | 要禁言的 QQ 号                   |
| `duration` | uint32   | `30 * 60` | 禁言时长, 单位秒, 0 表示取消禁言 |

::: tip 提示
该 API 无响应数据
:::



### 群全员禁言

终结点：`set_group_whole_ban`

**参数**

| 字段名     | 数据类型 | 默认值 | 说明     |
| ---------- | -------- | ------ | -------- |
| `group_id` | int64    | -      | 群号     |
| `enable`   | boolean  | `true` | 是否禁言 |

::: tip 提示
该 API 无响应数据
:::



### 群匿名用户禁言

::: warning 注意
该 API 从 go-cqhttp-v0.9.36 开始支持
:::

终结点：`set_group_anonymous_ban`

**参数**

| 字段名                     | 数据类型 | 默认值    | 说明                                                        |
| -------------------------- | -------- | --------- | ----------------------------------------------------------- |
| `group_id`                 | int64    | -         | 群号                                                        |
| `anonymous`                | object   | -         | 可选, 要禁言的匿名用户对象（群消息上报的 `anonymous` 字段） |
| `anonymous_flag` 或 `flag` | string   | -         | 可选, 要禁言的匿名用户的 flag（需从群消息上报的数据中获得） |
| `duration`                 | uint32   | `30 * 60` | 禁言时长, 单位秒, 无法取消匿名用户禁言                      |

::: tip 提示
上面的 `anonymous` 和 `anonymous_flag` 两者任选其一传入即可, 若都传入, 则使用 `anonymous`。
:::

::: tip 提示
该 API 无响应数据
:::



### 设置精华消息

终结点: `set_essence_msg`

**参数**

| 字段         | 类型  | 说明   |
| ------------ | ----- | ------ |
| `message_id` | int32 | 消息ID |

::: tip 提示
该 API 没有响应数据
:::



### 移出精华消息

终结点: `delete_essence_msg`

**参数**

| 字段         | 类型  | 说明   |
| ------------ | ----- | ------ |
| `message_id` | int32 | 消息ID |

::: tip 提示
该 API 没有响应数据
:::



### 群打卡

终结点：`send_group_sign`

| 字段名     | 数据类型 | 说明 |
| ---------- | -------- | ---- |
| `group_id` | int64    | 群号 |

::: tip 提示
该 API 无响应数据
:::



### 群设置匿名

终结点：`set_group_anonymous`

**参数**

| 字段名     | 数据类型 | 默认值 | 说明             |
| ---------- | -------- | ------ | ---------------- |
| `group_id` | int64    | -      | 群号             |
| `enable`   | boolean  | `true` | 是否允许匿名聊天 |

::: tip 提示
该 API 无响应数据
:::



### 发送群公告


终结点： `_send_group_notice`

**参数**

| 字段名     | 数据类型 | 默认值 | 说明             |
| ---------- | -------- | ------ | ---------------- |
| `group_id` | int64    |        | 群号             |
| `content`  | string   |        | 公告内容         |
| `image`    | string   |        | 图片路径（可选） |

::: tip 提示
该 API 没有响应数据
:::




### 获取群公告


终结点： `_get_group_notice`

**参数**

| 字段名     | 数据类型 | 默认值 | 说明 |
| ---------- | -------- | ------ | ---- |
| `group_id` | int64    |        | 群号 |


**响应数据**

响应内容为 json 数组，每个元素内容如下：

| 字段           | 类型   | 说明         |
| -------------- | ------ | ------------ |
| `sender_id`    | int64  | 公告发表者   |
| `publish_time` | int64  | 公告发表时间 |
| `message`      | object | 公告内容     |

其中 `message` 字段的内容如下：

| 字段     | 类型   | 说明     |
| -------- | ------ | -------- |
| `text`   | string | 公告内容 |
| `images` | array  | 公告图片 |

其中 `images` 字段每个元素内容如下：

| 字段     | 类型   | 说明     |
| -------- | ------ | -------- |
| `height` | string | 图片高度 |
| `width`  | string | 图片宽度 |
| `id`     | string | 图片ID   |



### 群组踢人

终结点：`set_group_kick`

**参数**

| 字段名               | 数据类型 | 默认值  | 说明               |
| -------------------- | -------- | ------- | ------------------ |
| `group_id`           | int64    | -       | 群号               |
| `user_id`            | int64    | -       | 要踢的 QQ 号       |
| `reject_add_request` | boolean  | `false` | 拒绝此人的加群请求 |

::: tip 提示
该 API 无响应数据
:::



### 退出群组

终结点：`set_group_leave`

**参数**

| 字段名       | 数据类型 | 默认值  | 说明                                                     |
| ------------ | -------- | ------- | -------------------------------------------------------- |
| `group_id`   | int64    | -       | 群号                                                     |
| `is_dismiss` | boolean  | `false` | 是否解散, 如果登录号是群主, 则仅在此项为 true 时能够解散 |

::: tip 提示
该 API 无响应数据
:::





## 文件



### 上传群文件

终结点: `upload_group_file`

**参数**

| 字段       | 类型   | 说明         |
| ---------- | ------ | ------------ |
| `group_id` | int64  | 群号         |
| `file`     | string | 本地文件路径 |
| `name`     | string | 储存名称     |
| `folder`   | string | 父目录ID     |

::: warning 注意
在不提供 `folder` 参数的情况下默认上传到根目录

只能上传本地文件, 需要上传 `http` 文件的话请先调用 [`download_file` API](#下载文件到缓存目录)下载
:::



### 删除群文件

::: tip 提示
`File` 对象信息请参考最下方
:::

终结点: `delete_group_file`

**参数**

| 字段       | 类型   | 说明                      |
| ---------- | ------ | ------------------------- |
| `group_id` | int64  | 群号                      |
| `file_id`  | string | 文件ID 参考 `File` 对象   |
| `busid`    | int32  | 文件类型 参考 `File` 对象 |

::: tip 提示
该 API 无响应数据
:::



### 创建群文件文件夹

::: warning 注意
仅能在根目录创建文件夹
:::

终结点: `create_group_file_folder`

**参数**

| 字段        | 类型   | 说明       |
| ----------- | ------ | ---------- |
| `group_id`  | int64  | 群号       |
| `name`      | string | 文件夹名称 |
| `parent_id` | string | 仅能为 `/` |

::: tip 提示
该 API 无响应数据
:::



### 删除群文件文件夹

::: tip 提示
`Folder` 对象信息请参考最下方
:::

终结点: `delete_group_folder`

| 字段        | 类型   | 说明                        |
| ----------- | ------ | --------------------------- |
| `group_id`  | int64  | 群号                        |
| `folder_id` | string | 文件夹ID 参考 `Folder` 对象 |

::: tip 提示
该 API 无响应数据
:::



### 获取群文件系统信息

终结点: `get_group_file_system_info`

**参数**

| 字段       | 类型  | 说明 |
| ---------- | ----- | ---- |
| `group_id` | int64 | 群号 |

**响应数据**

| 字段          | 类型  | 说明       |
| ------------- | ----- | ---------- |
| `file_count`  | int32 | 文件总数   |
| `limit_count` | int32 | 文件上限   |
| `used_space`  | int64 | 已使用空间 |
| `total_space` | int64 | 空间上限   |



### 获取群根目录文件列表

::: tip 提示
`File` 和 `Folder` 对象信息请参考最下方
:::

终结点: `get_group_root_files`

**参数**

| 字段       | 类型  | 说明 |
| ---------- | ----- | ---- |
| `group_id` | int64 | 群号 |

**响应数据**

| 字段      | 类型     | 说明       |
| --------- | -------- | ---------- |
| `files`   | File[]   | 文件列表   |
| `folders` | Folder[] | 文件夹列表 |



### 获取群子目录文件列表

::: tip 提示
`File` 和 `Folder` 对象信息请参考最下方
:::

终结点: `get_group_files_by_folder`

**参数**

| 字段        | 类型   | 说明                        |
| ----------- | ------ | --------------------------- |
| `group_id`  | int64  | 群号                        |
| `folder_id` | string | 文件夹ID 参考 `Folder` 对象 |

**响应数据**

| 字段      | 类型     | 说明       |
| --------- | -------- | ---------- |
| `files`   | File[]   | 文件列表   |
| `folders` | Folder[] | 文件夹列表 |



### 获取群文件资源链接

::: tip 提示
`File` 和 `Folder` 对象信息请参考最下方
:::

终结点: `get_group_file_url`

**参数**

| 字段       | 类型   | 说明                      |
| ---------- | ------ | ------------------------- |
| `group_id` | int64  | 群号                      |
| `file_id`  | string | 文件ID 参考 `File` 对象   |
| `busid`    | int32  | 文件类型 参考 `File` 对象 |

**响应数据**

| 字段  | 类型   | 说明         |
| ----- | ------ | ------------ |
| `url` | string | 文件下载链接 |

**File**

| 字段             | 类型   | 说明                   |
| ---------------- | ------ | ---------------------- |
| `group_id`       | int32  | 群号                   |
| `file_id`        | string | 文件ID                 |
| `file_name`      | string | 文件名                 |
| `busid`          | int32  | 文件类型               |
| `file_size`      | int64  | 文件大小               |
| `upload_time`    | int64  | 上传时间               |
| `dead_time`      | int64  | 过期时间,永久文件恒为0 |
| `modify_time`    | int64  | 最后修改时间           |
| `download_times` | int32  | 下载次数               |
| `uploader`       | int64  | 上传者ID               |
| `uploader_name`  | string | 上传者名字             |

**Folder**

| 字段               | 类型   | 说明       |
| ------------------ | ------ | ---------- |
| `group_id`         | int32  | 群号       |
| `folder_id`        | string | 文件夹ID   |
| `folder_name`      | string | 文件名     |
| `create_time`      | int64  | 创建时间   |
| `creator`          | int64  | 创建者     |
| `creator_name`     | string | 创建者名字 |
| `total_file_count` | int32  | 子文件数量 |



### 上传私聊文件

终结点: `upload_private_file`

**参数**

| 字段      | 类型   | 说明         |
| --------- | ------ | ------------ |
| `user_id` | int64  | 对方 QQ 号   |
| `file`    | string | 本地文件路径 |
| `name`    | string | 文件名称     |

::: warning 注意
只能上传本地文件, 需要上传 `http` 文件的话请先调用 [`download_file` API](#下载文件到缓存目录)下载
:::


