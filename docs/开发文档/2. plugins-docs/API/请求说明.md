---
sidebar_position: 1
---

### 基础传输

请求一个 API 时, 包含了: API 终结点, 以及 API 所需参数.

### 请求说明

```Python
# coding:utf-8

from libs.event.qqevent import onkeyword

@onkeyword(keywordList=["ping"])
async def foo(n):
    result = await n.callAPI(url="API", param1="value", param2="value")
    # result API的响应
    # url    API终结点
    # param1 参数1
    # param2 参数2
```

API 的响应是一个 JSON 数据, 如下:
```json
{
    "status": "状态, 表示 API 是否调用成功, 如果成功, 则是 OK, 其他的在下面会说明",
    "retcode": 0,
    "msg": "错误消息, 仅在 API 调用失败时有该字段",
    "wording": "对错误的详细解释(中文), 仅在 API 调用失败时有该字段",
    "data": {
        "响应数据名": "数据值",
        "响应数据名2": "数据值",
    },
    "echo": "'回声', 如果请求时指定了 echo, 那么响应也会包含 echo"
}
```

其中, `status` 字段:
| 值      | 说明                                                |
|--------|---------------------------------------------------|
| ok     | api 调用成功                                          |
| async  | api 调用已经提交异步处理, 此时 `retcode` 为 1, 具体 api 调用是否成功无法得知 |
| failed | api 调用失败                                          |

`retcode` 字段:
| 值  | 说明                                |
|----|-----------------------------------|
| 0  | 调用成功                              |
| 1  | 已提交 async 处理                      |
| 其他 | 操作失败, 具体原因可以看响应的 `msg` 和 `wording` 字段 |
